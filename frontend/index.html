<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>–°–ª—É–∂–±–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
  <script>window.SUPPORT_BASE_PATH = '/support';</script>
</head>
<body>
<div id="app">

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SCREEN: Loading
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-loading" class="screen active">
    <div class="loader" style="height:100vh">
      <div class="spinner"></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SCREEN: Ticket List
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-list" class="screen">
    <div class="header">
      <h1>üé´ –û–±—Ä–∞—â–µ–Ω–∏—è</h1>
      <button class="btn-icon" id="btn-new-ticket" title="–ù–æ–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ">Ôºã</button>
    </div>
    <div class="tabs">
      <button class="tab-btn active" data-tab="mine">–ú–æ–∏</button>
      <button class="tab-btn" data-tab="all" id="tab-all" style="display:none">–í—Å–µ</button>
      <button class="tab-btn" data-tab="closed">–ó–∞–∫—Ä—ã—Ç—ã–µ</button>
    </div>
    <div id="ticket-list-content" class="ticket-list">
      <div class="loader"><div class="spinner"></div></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SCREEN: Create / Edit Ticket
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-form" class="screen">
    <div class="header">
      <button class="btn-icon" id="btn-form-back">‚Üê</button>
      <h1 id="form-title">–ù–æ–≤–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ</h1>
    </div>
    <div class="form-wrap">
      <div class="form-group">
        <label class="form-label">–ó–∞–≥–æ–ª–æ–≤–æ–∫ *</label>
        <input class="form-input" id="f-title" type="text" placeholder="–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É" maxlength="200" />
      </div>
      <div class="form-group">
        <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã *</label>
        <textarea class="form-textarea" id="f-desc" rows="4" placeholder="–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ‚Ä¶"></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">–®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</label>
        <textarea class="form-textarea" id="f-steps" rows="3" placeholder="1. –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É&#10;2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É‚Ä¶"></textarea>
      </div>
      <div class="form-group">
        <label class="form-label">–°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É</label>
        <input class="form-input" id="f-url" type="url" placeholder="https://‚Ä¶" />
      </div>
      <div class="form-group">
        <label class="form-label">–§–∞–π–ª—ã</label>
        <div class="file-upload-area" id="file-upload-area">
          üìé –ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤
          <input type="file" id="file-input" multiple style="display:none" />
        </div>
        <div class="file-list" id="file-list"></div>
      </div>
      <label class="checkbox-row">
        <input type="checkbox" id="f-urgent" />
        <span>üî¥ –°—Ä–æ—á–Ω–æ</span>
      </label>
      <button class="btn-primary" id="btn-submit-ticket">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
       SCREEN: Ticket Detail
  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="screen-detail" class="screen">
    <div class="detail-header">
      <button class="btn-back" id="btn-detail-back">‚Üê</button>
      <div style="flex:1;min-width:0">
        <div id="d-number-urgent" style="display:flex;align-items:center;gap:8px">
          <span class="detail-number" id="d-number"></span>
          <span class="badge-urgent" id="d-urgent-badge" style="display:none">üî¥ –°–†–û–ß–ù–û</span>
        </div>
        <div class="detail-title" id="d-title"></div>
      </div>
    </div>

    <div class="detail-body" id="detail-body">
      <!-- Status row -->
      <div class="info-section" id="d-status-section">
        <div class="info-label">–°—Ç–∞—Ç—É—Å</div>
        <div style="display:flex;align-items:center;gap:10px;margin-top:4px">
          <span id="d-status-badge" class="badge-status"></span>
          <!-- Support/admin status dropdown -->
          <select class="status-select" id="d-status-select" style="display:none"></select>
        </div>
      </div>

      <!-- Action buttons -->
      <div class="actions-row" id="d-actions"></div>

      <!-- Description -->
      <div class="info-section" id="d-desc-section" style="display:none">
        <div class="info-label">–û–ø–∏—Å–∞–Ω–∏–µ</div>
        <div class="info-value" id="d-desc"></div>
      </div>

      <!-- Steps -->
      <div class="info-section" id="d-steps-section" style="display:none">
        <div class="info-label">–®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</div>
        <div class="info-value" id="d-steps"></div>
      </div>

      <!-- URL -->
      <div class="info-section" id="d-url-section" style="display:none">
        <div class="info-label">–°—Å—ã–ª–∫–∞</div>
        <a class="info-link" id="d-url" target="_blank" rel="noopener"></a>
      </div>

      <!-- Files -->
      <div class="info-section" id="d-files-section" style="display:none">
        <div class="info-label">–í–ª–æ–∂–µ–Ω–∏—è</div>
        <div class="attached-files" id="d-files"></div>
      </div>

      <!-- Meta -->
      <div class="info-section">
        <div class="info-label">–ê–≤—Ç–æ—Ä</div>
        <div class="info-value" id="d-author"></div>
      </div>
    </div>

    <!-- Chat section ‚Äî rendered below detail-body via flex on screen -->
    <div class="chat-section" id="chat-section" style="flex:0 0 auto;max-height:55vh;display:flex;flex-direction:column">
      <div class="chat-label">‚îÄ‚îÄ –ß–∞—Ç ‚îÄ‚îÄ</div>
      <div class="chat-messages" id="chat-messages"></div>
      <div id="chat-file-preview" class="chat-file-preview" style="display:none"></div>
      <div class="chat-input-wrap" id="chat-input-wrap">
        <button class="chat-attach-btn" id="chat-attach-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">üìé</button>
        <input type="file" id="chat-file-input" style="display:none" />
        <textarea
          class="chat-input" id="chat-input"
          rows="1" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å‚Ä¶"
        ></textarea>
        <button class="chat-send-btn" id="chat-send-btn">‚û§</button>
      </div>
    </div>
  </div>

</div>

<div id="toast"></div>

<script src="app.js"></script>
</body>
</html>
